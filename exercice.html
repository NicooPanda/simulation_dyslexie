<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice - Simulation de la dyslexie</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 26px;
            line-height: 1.6;
            padding: 50px;
            background-color: #f8f8f8;
            color: #222;
            text-align: justify;
        }

        .container {
            max-width: 900px;
            margin: auto;
        }

        .controls {
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease, opacity 0.3s ease;
        }

        button:hover:not(:disabled) {
            background-color: #0056b3;
        }
        
        button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .dyslexic-text {
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            min-height: 100px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .word {
            display: inline-block;
            margin-right: 8px;
            position: relative;
            transition: all 0.3s ease-out;
        }
        
        .letter {
            display: inline-block;
            position: relative;
            transition: transform 0.2s ease-out, filter 0.2s ease-out, margin 0.2s ease-out;
        }

        .flipped {
            transform: scaleX(-1);
        }

        .jumped {
            transform: translateY(-5px);
        }

        .crowded {
            margin-right: -5px;
        }

        .blurred {
            filter: blur(1.5px);
        }
    </style>
</head>
<body>

    <div class="container">
        <-nav style="text-align: center; margin-bottom: 20px;">
            <-a href="index.html" style="font-size: 20px; text-decoration: none; color: #007BFF;">Retour à la page principale</a>
        </-nav>
        
        <h1 id="page-title">Exercice de lecture</h1>

        <div class="controls">
            <button id="start-button">Démarrer la simulation</button>
            <button id="stop-button">Arrêter la simulation</button>
        </div>

        <div class="dyslexic-text">
            <p id="simulated-text">
                Cet exercice de lecture a pour but de vous aider à mieux comprendre la perception des mots et des lettres. La pratique peut vous aider à repérer les mots clés même lorsqu'ils sont affectés. Ce sont ces défis qui expliquent la lenteur de la lecture et la fatigue que cela génère.
            </p>
        </div>
    </div>

    <script>
        const pageTitleElement = document.getElementById('page-title');
        const textElement = document.getElementById('simulated-text');
        const startButton = document.getElementById('start-button');
        const stopButton = document.getElementById('stop-button');
        let intervalId;
        const fixedText = textElement.textContent; // Texte fixe pour la simulation

        function createHtmlElements(element, text) {
            const words = text.trim().split(/\s+/);
            let htmlContent = '';
            words.forEach(word => {
                let lettersHtml = '';
                for (const char of word) {
                    lettersHtml += `<span class="letter">${char}</span>`;
                }
                htmlContent += `<span class="word">${lettersHtml}</span> `;
            });
            element.innerHTML = htmlContent;
        }
        
        function applyRandomEffects() {
            const allElements = document.querySelectorAll('.word');
            allElements.forEach(word => {
                const lettersInWord = word.querySelectorAll('.letter');
                
                if (Math.random() < 0.15 && lettersInWord.length > 2) {
                    const middlePart = Array.from(lettersInWord).slice(1, lettersInWord.length - 1);
                    for (let i = middlePart.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [middlePart[i].textContent, middlePart[j].textContent] = [middlePart[j].textContent, middlePart[i].textContent];
                    }
                }

                lettersInWord.forEach(letter => {
                    letter.className = 'letter';

                    if (Math.random() < 0.05) {
                        letter.classList.add('jumped');
                    }
                    
                    if (Math.random() < 0.02) {
                        letter.classList.add('flipped');
                    }

                    if (Math.random() < 0.03) {
                        letter.classList.add('crowded');
                    }

                    if (Math.random() < 0.02) {
                        letter.classList.add('blurred');
                    }
                });
            });
        }

        function startSimulation() {
            if (intervalId) {
                clearInterval(intervalId);
            }
            
            createHtmlElements(textElement, fixedText);
            
            intervalId = setInterval(applyRandomEffects, 300);
            
            startButton.disabled = true;
            stopButton.disabled = false;
        }

        function stopSimulation() {
            if (intervalId) {
                clearInterval(intervalId);
            }
            startButton.disabled = false;
            stopButton.disabled = true;
        }

        document.addEventListener('DOMContentLoaded', () => {
            stopButton.disabled = true;
            startSimulation();
        });
        
        startButton.addEventListener('click', startSimulation);
        stopButton.addEventListener('click', stopSimulation);
    </script>
</body>
</html>

